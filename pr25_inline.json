[{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761910984","pull_request_review_id":3748656677,"id":2761910984,"node_id":"PRRC_kwDOPXCl2s6kn2rI","diff_hunk":"@@ -0,0 +1,49 @@\n+name: Deploy Backend\n+\n+on:\n+  push:\n+    branches:\n+      - main\n+    paths:\n+      - 'go.**'\n+      - '**.go'","path":".github/workflows/deploy.yml","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"f9cec34fbddba32c7fb391e431000234b76588d2","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游릭 The path filters `go.**` and `**.go` might be slightly redundant. `**.go` should cover all Go files. Consider simplifying to just `**.go` for Go files, and `go.mod` and `go.sum` if you want to explicitly track those.","created_at":"2026-02-04T02:46:57Z","updated_at":"2026-02-04T02:47:10Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761910984","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761910984"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761910984"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761910984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":9,"original_line":9,"side":"RIGHT","author_association":"NONE","original_position":9,"position":9,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761911160","pull_request_review_id":3748656677,"id":2761911160,"node_id":"PRRC_kwDOPXCl2s6kn2t4","diff_hunk":"@@ -70,10 +102,16 @@ func (d *Database) Ping(ctx context.Context) error {\n \n // Close closes the database connection.\n func (d *Database) Close() error {","path":"internal/infrastructure/database/rdb/postgres.go","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"f9cec34fbddba32c7fb391e431000234b76588d2","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游리 Consider consolidating the database closing log messages. A single log at the beginning of the `Close` method would suffice, with specific error logs if `d.dialer.Close()` fails.","created_at":"2026-02-04T02:47:04Z","updated_at":"2026-02-04T02:47:10Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761911160","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761911160"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761911160"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761911160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":101,"original_line":101,"side":"RIGHT","author_association":"NONE","original_position":76,"position":73,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761934468","pull_request_review_id":3748679945,"id":2761934468,"node_id":"PRRC_kwDOPXCl2s6kn8aE","diff_hunk":"@@ -70,10 +102,16 @@ func (d *Database) Ping(ctx context.Context) error {\n \n // Close closes the database connection.","path":"internal/infrastructure/database/rdb/postgres.go","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"1328441b19bbb9e758e3c9a93a7ad023a36cfc9a","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游리 The log message \"Closing database connection\" should ideally be at the beginning of the `Close` method to indicate that the database shutdown process has started, rather than being conditional on `d.Pool != nil`. This ensures the log always appears when `Close` is called.\n\n```suggestion\nfunc (d *Database) Close() error {\n\td.logger.Info(context.Background(), \"Closing database connection\")\n\tif d.Pool != nil {\n\t\td.Pool.Close()\n\t}\n\tif d.dialer != nil {\n\t\tif err := d.dialer.Close(); err != nil {\n\t\t\td.logger.Error(context.Background(), \"Failed to close database dialer\", err)\n\t\t\treturn err\n\t\t}\n\t}\n\n\treturn nil\n}\n```","created_at":"2026-02-04T02:59:45Z","updated_at":"2026-02-04T02:59:50Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761934468","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761934468"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761934468"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761934468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":100,"original_line":100,"side":"RIGHT","author_association":"NONE","original_position":75,"position":72,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761934485","pull_request_review_id":3748679945,"id":2761934485,"node_id":"PRRC_kwDOPXCl2s6kn8aV","diff_hunk":"@@ -144,7 +144,7 @@ type DatabaseConfig struct {\n \tUser string `envconfig:\"USER\" required:\"true\"`\n \n \t// Database password","path":"pkg/config/config.go","commit_id":"1328441b19bbb9e758e3c9a93a7ad023a36cfc9a","original_commit_id":"1328441b19bbb9e758e3c9a93a7ad023a36cfc9a","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游리 The comment for the `Password` field should be updated to reflect that it is now optional and not used when the Cloud SQL Connector is enabled, as per the PR description and changes.\n\n```suggestion\n\t// Database password (optional when Cloud SQL Connector is used with IAM AuthN)\n\tPassword string `envconfig:\"PASSWORD\"`\n```","created_at":"2026-02-04T02:59:46Z","updated_at":"2026-02-04T02:59:50Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761934485","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761934485"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761934485"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761934485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":146,"side":"RIGHT","author_association":"NONE","original_position":3,"position":1,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761964654","pull_request_review_id":3748709731,"id":2761964654,"node_id":"PRRC_kwDOPXCl2s6koDxu","diff_hunk":"@@ -70,10 +99,16 @@ func (d *Database) Ping(ctx context.Context) error {\n \n // Close closes the database connection.","path":"internal/infrastructure/database/rdb/postgres.go","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"31a9a1302625322a0b159b6791cee0cabf3558c6","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游댮 In the `Close` method, if `d.dialer.Close()` returns an error, it is logged but the method continues to return `nil`. The error should be returned so that the caller is aware of the failure to close the dialer.\n\n```suggestion\n\t\tif err := d.dialer.Close(); err != nil {\n\t\t\td.logger.Error(context.Background(), \"Failed to close database dialer\", err)\n\t\t\treturn err\n\t\t}\n```","created_at":"2026-02-04T03:13:45Z","updated_at":"2026-02-04T03:13:52Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761964654","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761964654"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761964654"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761964654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":100,"original_line":100,"side":"RIGHT","author_association":"NONE","original_position":72,"position":72,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761964745","pull_request_review_id":3748709731,"id":2761964745,"node_id":"PRRC_kwDOPXCl2s6koDzJ","diff_hunk":"@@ -281,14 +282,17 @@ func (c *Config) Validate() error {\n \t\treturn fmt.Errorf(\"invalid log format: %s\", c.Logging.Format)\n \t}\n \n+\tif !c.IsLocal() && c.Database.InstanceConnectionName == \"\" {\n+\t\treturn fmt.Errorf(\"database instance connection name is required for non-local environments\")\n+\t}\n+\n \treturn nil\n }\n \n-// GetDSN returns the PostgreSQL database connection string in the format:\n-// \"postgres://user:password@host:port/dbname?sslmode=mode\"\n-func (c *DatabaseConfig) GetDSN() string {\n-\treturn fmt.Sprintf(\"postgres://%s:%s@%s:%d/%s?sslmode=%s\",\n-\t\tc.User, c.Password, c.Host, c.Port, c.Name, c.SSLMode)\n+// GetDSN returns the database connection string.\n+func (c DatabaseConfig) GetDSN() string {\n+\treturn fmt.Sprintf(\"host=%s port=%d user=%s dbname=%s sslmode=%s\",\n+\t\tc.Host, c.Port, c.User, c.Name, c.SSLMode)\n }","path":"pkg/config/config.go","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"31a9a1302625322a0b159b6791cee0cabf3558c6","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游리 The `GetDSN()` method now constructs a connection string without a password. This change is consistent with the goal of moving towards password-less authentication with the Cloud SQL Connector. For local development, this implies that the PostgreSQL database either does not require a password (e.g., via `trust` authentication for the `testuser`) or relies on `gcloud auth application-default login` for credentials. \n\nIt would be beneficial to add a comment here or in the relevant `README.md` file to explicitly state the expected authentication mechanism for local development, especially if a password is still expected in some local setups without the connector.","created_at":"2026-02-04T03:13:49Z","updated_at":"2026-02-04T03:13:52Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761964745","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761964745"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761964745"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761964745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":296,"original_line":296,"side":"RIGHT","author_association":"NONE","original_position":50,"position":50,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982628","pull_request_review_id":3748730665,"id":2761982628,"node_id":"PRRC_kwDOPXCl2s6koIKk","diff_hunk":"@@ -0,0 +1,57 @@\n+name: Deploy Backend\n+\n+on:\n+  push:\n+    branches:\n+      - main\n+    paths:\n+      - 'go.**'\n+      - '**.go'\n+      - 'Dockerfile'\n+      - '.github/workflows/deploy.yml'\n+\n+\n+\n+jobs:\n+  build-and-push:\n+    runs-on: ubuntu-latest\n+    environment:\n+      name: ${{ github.ref == 'refs/heads/main' && 'development' || 'production' }}\n+    permissions:","path":".github/workflows/deploy.yml","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游리 The environment name logic currently assumes `main` branch maps to `development` and anything else to `production`. Consider if this is robust enough for a typical branching strategy, which might include a `staging` branch or feature branches needing different environments.","created_at":"2026-02-04T03:21:06Z","updated_at":"2026-02-04T03:21:16Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761982628","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982628"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761982628"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":20,"original_line":20,"side":"RIGHT","author_association":"NONE","original_position":20,"position":20,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982800","pull_request_review_id":3748730665,"id":2761982800,"node_id":"PRRC_kwDOPXCl2s6koINQ","diff_hunk":"@@ -29,17 +32,42 @@ func New(ctx context.Context, cfg *config.Config, logger *logging.Logger) (*Data\n \tpoolConfig.MaxConns = int32(cfg.Database.MaxOpenConns)\n \tpoolConfig.MinConns = int32(cfg.Database.MaxIdleConns)\n \n+\tvar dialer *cloudsqlconn.Dialer\n+\tif !cfg.IsLocal() {\n+\t\tvar opts []cloudsqlconn.Option\n+\t\topts = append(opts, cloudsqlconn.WithIAMAuthN())\n+\n+\t\t// Use Private Service Connect (PSC) for non-local environments (dev, stg, prod)\n+\t\topts = append(opts, cloudsqlconn.WithDefaultDialOptions(cloudsqlconn.WithPSC()))\n+\n+\t\td, err := cloudsqlconn.NewDialer(ctx, opts...)\n+\t\tif err != nil {","path":"internal/infrastructure/database/rdb/postgres.go","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游릭 While `DialFunc` passes its own context, the `cloudsqlconn.NewDialer` and `d.Dial` calls also use the `ctx` from the `New` function. It's generally a good practice to use the context passed to `DialFunc` itself for the `d.Dial` call to ensure proper context propagation and cancellation.\n\n```suggestion\n\t\tpoolConfig.ConnConfig.DialFunc = func(dialCtx context.Context, _ string, _ string) (net.Conn, error) {\n\t\t\treturn d.Dial(dialCtx, cfg.Database.InstanceConnectionName)\n\t\t}\n```","created_at":"2026-02-04T03:21:10Z","updated_at":"2026-02-04T03:21:16Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761982800","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982800"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761982800"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":44,"original_line":44,"side":"RIGHT","author_association":"NONE","original_position":32,"position":32,"subject_type":"line"},{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982927","pull_request_review_id":3748730665,"id":2761982927,"node_id":"PRRC_kwDOPXCl2s6koIPP","diff_hunk":"@@ -281,14 +282,17 @@ func (c *Config) Validate() error {\n \t\treturn fmt.Errorf(\"invalid log format: %s\", c.Logging.Format)\n \t}\n \n+\tif !c.IsLocal() && c.Database.InstanceConnectionName == \"\" {\n+\t\treturn fmt.Errorf(\"database instance connection name is required for non-local environments\")\n+\t}\n+\n \treturn nil\n }","path":"pkg/config/config.go","commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","original_commit_id":"4c50452b633160616f4b28b44f67c1f5aa821985","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"游릭 The `GetDSN()` method now generates a DSN in the `key=value` format instead of the `postgres://user:password@host:port/dbname?sslmode=mode` URL format. While both are valid for `pgxpool`, the URL format is often more portable and explicitly states the protocol. Ensure this change is intentional and consistent with how DSNs are expected to be used elsewhere in the application.","created_at":"2026-02-04T03:21:13Z","updated_at":"2026-02-04T03:21:16Z","html_url":"https://github.com/liverty-music/backend/pull/25#discussion_r2761982927","pull_request_url":"https://api.github.com/repos/liverty-music/backend/pulls/25","_links":{"self":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982927"},"html":{"href":"https://github.com/liverty-music/backend/pull/25#discussion_r2761982927"},"pull_request":{"href":"https://api.github.com/repos/liverty-music/backend/pulls/25"}},"reactions":{"url":"https://api.github.com/repos/liverty-music/backend/pulls/comments/2761982927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":290,"original_line":290,"side":"RIGHT","author_association":"NONE","original_position":39,"position":39,"subject_type":"line"}]